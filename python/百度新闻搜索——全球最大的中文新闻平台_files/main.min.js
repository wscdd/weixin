function formatTime(){var a=new Date,b=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"];return{Y:a.getFullYear(),M:a.getMonth()<9?"0"+(a.getMonth()+1):a.getMonth()+1,D:a.getDate()<10?"0"+a.getDate():a.getDate(),h:a.getHours()<10?"0"+a.getHours():a.getHours(),m:a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes(),s:a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds(),date:b[a.getDay()]}}function Time(){setTimeout(function(){var a=formatTime();$(".js-A-time").html(a.Y+"\u5e74"+a.M+"\u6708"+a.D+"\u65e5 "+a.h+":"+a.m+"  \u661f\u671f"+a.date)},1e3)}$(function(){var a={};a.handleData=function(a,b){function c(a){var b=window["hq_str_"+a].split(/,|=/g),c={};return c.symbol=a,c.name=b[0],c.price=b[1]?(b[1]-0).toFixed(3):"--",c.zde=b[2]?(b[2]-0).toFixed(2):"--",c.zdf=b[3]?(b[3]-0).toFixed(2)+"%":"--",c}function d(a){var b={},c=window["hq_str_"+a].split(/,|=/g);return b.symbol=a,b.name=c[1],b.zde=c[7]?c[7]:"--",b.zdf=c[8]?c[8]+"%":"--",b.price=c[6],"HSCCI"==c[0]&&(b.name="\u7ea2\u7b79\u6307\u6570"),"HSCEI"==c[0]&&(b.name="\u56fd\u4f01\u6307\u6570"),b}function e(a){var b={},c=window["hq_str_"+a].split(/,|=/g);return b.symbol=a,b.name=c[0].replace("\u6307\u6570",""),b.price=c[1]||"--",b.zdf=c[3]?c[3]+"%":"--",b.zde=c[3]||"--",-1!=a.indexOf("gb_")&&(b.zde=c[4]||"--",b.zdf=c[2]?c[2]+"%":"--"),-1!=a.indexOf("nb_")&&(b.zde=c[2]?(c[1]-c[2]).toFixed(2):"--",b.zdf=c[2]?(100*(c[1]-c[2])/c[2]).toFixed(2)+"%":"--"),"b_FSSTI"==a&&(b.name="\u65b0\u52a0\u5761"),"b_TWSE"==a&&(b.name="\u53f0\u6e7e\u52a0\u6743"),b}function f(a){var b={},c=window["hq_str_"+a].split(/,|=/g);return b.symbol=a,b.price=c[8]||"--",b.PRE=c[3]||"--",b.name=c[9],b.zde=c[10]||"--","USDCNY"==a&&(b.name="\u7f8e\u5143/\u4eba\u6c11\u5e01",b.zde=(c[8]-c[3]).toFixed(4)),b}function g(a){var b={},c=window["hq_str_"+a].split(/,|=/g);return b.symbol=a,b.name=c[13],b.price=c[0]||"--",b.zdf=c[1]?c[1]+"%":"--",b.zde=c[7]?(c[0]-c[7]).toFixed(2):"--",b}var a=a,h=null;if(a){switch(a){case"cn":h=c(b);break;case"hk":h=d(b);break;case"global":h=e(b);break;case"forex":h=f(b);break;case"futures":h=g(b)}var i={data:h,fn:{cndata:c,hkdata:d,globaldata:e,forexdata:f,futuredata:g}};return i}},a.getData=function(b,c,d){var b=b,c=c;script_stock(b.join(","),function(){for(var e={},f=0,g=b.length;g>f;f++){var h=a.handleData(c,b[f]);e[b[f]]=h.data}d&&d(e)})};var b=function(a){this.template={"cn-hk":'<tr class="js-hq-detail %up_down%" data-img="js-%symbol%">						<td class="js-hqname" width="70"><div class="blk-hq-name"><a href="%url%" target="_blank">%name%</a></div></td>						<td><span>%price%</span></td>						<td><span>%zde%</span></td>						<td><span>%zdf%</span></td>				  </tr>	    		  <tr class="js-tableimg  js-%symbol%">	    				<td colspan="4">							<div>								<a href="%url%" target="_blank"><img  src="%imgurl%" alt="%name%"/></a>							</div>					    </td>				  </tr>',global:'<tr class="%up_down%">		    				<td width="80" class="js-hqname"><div class="blk-hq-name"><a href="%url%" target="_blank">%name%</a></div></td>		    				<td>%price%</td>		    				<td>%zdf%</td>		    				<td>%zde%</td>		    		 </tr>',forex:'<tr class="%up_down%">		    					<td><div class="blk-hq-name"><a href="%url%" class="forexlink" target="_blank" >%name%</a></div></td>		    					<td>%price%</td>		    					<td>%zde%</td>		    					<td class="fc-666">%pre%</td>		    	 </tr>',futures:'<tr class="%up_down%">		    					<td><div class="blk-hq-name"><a href="%url%" target="_blank">%name%</a><div></td>		    					<td>%price%</td>		    					<td>%zde%</td>		    					<td>%zdf%</td>		    	  </tr>'},this.domstr="list-",this.apidata=a,this.cates=["cn","hk","future","forex","global"],this.objTime=null,this.initTabs=!1,this.init()};b.prototype.render=function(b){var b=b,c=this;switch(b){case"forex":a.getData(c.apidata[b],b,function(a){var d="";for(var e in a){var f=a[e].name.replace("\u5373\u671f\u6c47\u7387","").replace("\u5151","/"),g=a[e].symbol.replace("fx_s","").toUpperCase(),h=a[e].zde<0?"hq-down":a[e].zde>0?"hq-up":"",i=a[e].zde>0?"+":(a[e].zde<0,""),j=c.apidata.link[3].replace(/%symbol%/,g);d+=c.template[b].replace(/%name%/g,f).replace(/%pre%/g,a[e].PRE).replace(/%zde%/g,i+a[e].zde).replace(/%price%/g,a[e].price).replace(/%up_down%/g,h).replace(/%url%/g,j)}$("."+c.domstr+b+" tbody").html(d),$(".list-"+b+" tr").last().addClass("no-bb")});break;case"global":a.getData(c.apidata[b],b,function(a){var d="";for(var e in a){var g=(a[e].symbol,a[e].zde>0?"hq-down":a[e].zde<0?"hq-up":""),h=a[e].zde>0?"+":(a[e].zde<0,""),i=c.apidata.link[2]?!1:"http://finance.sina.com.cn/money/globalindex/";d+=c.template[b].replace(/%name%/g,a[e].name).replace(/%zdf%/g,h+a[e].zdf).replace(/%zde%/g,h+a[e].zde).replace(/%price%/g,a[e].price).replace(/%up_down%/g,g).replace(/%url%/g,i)}$("."+c.domstr+b).html(d),$(".list-"+b+" tr").last().addClass("no-bb")});break;case"futures":a.getData(c.apidata[b],b,function(a){var d="";for(var e in a){var f=a[e].symbol,g=a[e].zde<0?"hq-down":a[e].zde>0?"hq-up":"",h=a[e].zde>0?"+":(a[e].zde<0,""),i=c.apidata.link[4].replace(/%symbol%/,f.replace("hf_",""));d+=c.template[b].replace(/%name%/g,a[e].name).replace(/%zdf%/g,h+a[e].zdf).replace(/%zde%/g,h+a[e].zde).replace(/%price%/g,a[e].price).replace(/%up_down%/g,g).replace(/%url%/g,i)}$("."+c.domstr+b+" tbody").html(d),$(".list-"+b+" tr").last().addClass("no-bb")});break;case"cn":a.getData(c.apidata[b],b,function(a){var d="";for(var e in a){var f=a[e].symbol,g=a[e].zde<0?"hq-down":a[e].zde>0?"hq-up":"",h=c.apidata.imgurl[0].replace(/%symbol%/g,a[e].symbol.replace("s_",""))+"?"+rdt(),i=a[e].zde>0?"+":(a[e].zde<0,""),j=c.apidata.link[0].replace(/%symbol%/g,a[e].symbol.replace("s_",""));d+=c.template["cn-hk"].replace(/%name%/g,a[e].name).replace(/%zdf%/g,i+a[e].zdf).replace(/%zde%/g,i+a[e].zde).replace(/%price%/g,a[e].price).replace(/%up_down%/g,g).replace(/%symbol%/g,f).replace(/%url%/g,j).replace(/%imgurl%/g,h)}$("."+c.domstr+b).html(d),$("."+c.domstr+b).find(".js-tableimg").eq(0).show(),$(".js-table").find("li").eq(0).find("table tr").eq(0).addClass("no-bb"),$(".itemimg .js-tableimg").last().addClass("no-bb"),$(".itemimg .js-hq-detail").last().addClass("no-bb"),c.imghover(b)});break;case"hk":a.getData(c.apidata[b],b,function(a){var d="";for(var e in a){var f=a[e].symbol,g=a[e].zde>0?"hq-down":a[e].zde<0?"hq-up":"",h=a[e].zde>0?"+":(a[e].zde<0,""),i=c.apidata.imgurl[1].replace(/%symbol%/g,a[e].symbol.replace("rt_hk",""))+"?"+rdt(),j=c.apidata.link[1].replace(/%symbol%/g,a[e].symbol.replace("rt_hk",""));d+=c.template["cn-hk"].replace(/%name%/g,a[e].name).replace(/%zdf%/g,h+a[e].zdf).replace(/%zde%/g,h+a[e].zde).replace(/%price%/g,a[e].price).replace(/%up_down%/g,g).replace(/%symbol%/g,f).replace(/%url%/g,j).replace(/%imgurl%/g,i)}$("."+c.domstr+b).html(d),$("."+c.domstr+b).find(".js-tableimg").eq(0).show(),$(".js-table").find("li").eq(1).find("table tr").eq(0).addClass("no-bb"),$(".itemimg .js-tableimg").last().addClass("no-bb"),$(".itemimg .js-hq-detail").last().addClass("no-bb"),c.imghover(b)})}return c.initTabs||(c.initTabs=!0,c.mouseovertabs()),c},b.prototype.mouseovertabs=function(){var a=this;$(".hq-tablist a").hover(function(b){var c=$(this).index();$(".hq-tablist a").removeClass("cur"),$(this).addClass("cur"),$(".js-table").find("li").hide(),$(".js-table").find("li").eq(c).show();var d=$(".js-table").find("li").eq(c).attr("data-cate");"hk"==d||"cn"==d?($(".js-table").find("li").eq(c).find("table tr").removeClass("no-bb"),$(".js-table").find("li").eq(c).find("table tr").eq(0).addClass("no-bb"),$(".item-"+d+" .js-tableimg").last().addClass("no-bb"),$(".item-"+d+" .js-hq-detail").last().addClass("no-bb")):a.render(d)})},b.prototype.imghover=function(a){$(".list-"+a+" .js-hq-detail").hover(function(b){$(".list-"+a+" .js-tableimg").hide();var c=$(this).next().eq(0);$(".list-"+a+" .js-hq-detail").removeClass("no-bb"),$(".item-"+a+" .js-tableimg").last().addClass("no-bb"),$(".item-"+a+" .js-hq-detail").last().addClass("no-bb"),$(this).addClass("no-bb"),c.slideDown()},function(a){a.toElement||a.relatedTarget})},b.prototype.init=function(){this.render("cn").render("hk").render("global").render("forex").render("futures")};new b(product);(new MarketTS).bind("stock","sh",function(){},function(a){$(".js-A-status").html(a)})}),Time();